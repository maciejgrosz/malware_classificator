import argparse
import json
import os


def remove_zeros(data):
    cleaned_data = {k: v for k, v in data.items() if v != 0}
    return cleaned_data


def process_file(file_path):
    with open(file_path, "r") as f:
        data = json.load(f)

    cleaned_data = remove_zeros(data)

    with open(file_path, "w") as f:
        json.dump(cleaned_data, f, indent=4)


def process_directory(directory):
    for filename in os.listdir(directory):
        if filename.endswith(".json"):
            file_path = os.path.join(directory, filename)
            process_file(file_path)
            print(f"Processed {filename}")


if __name__ == "__main__":
    parser = argparse.ArgumentParser(
        description="Remove zero value features from JSON files in place."
    )
    parser.add_argument("directory", help="Directory containing the JSON files")

    args = parser.parse_args()

    process_directory(args.directory)
